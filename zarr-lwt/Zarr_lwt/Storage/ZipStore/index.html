<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ZipStore (zarr-lwt.Zarr_lwt.Storage.ZipStore)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">zarr-lwt</a> &#x00BB; <a href="../../index.html">Zarr_lwt</a> &#x00BB; <a href="../index.html">Storage</a> &#x00BB; ZipStore</nav><header class="odoc-preamble"><h1>Module <code><span>Storage.ZipStore</span></code></h1><p>An Lwt-aware Zip file storage backend for a Zarr v3 hierarchy.</p></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../../zarr/Zarr/Zip/module-type-S/index.html">Zarr.Zip.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../../../../zarr/Zarr/Zip/module-type-S/Deferred/index.html#type-t">Deferred.t</a></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></span></code></summary><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../../zarr/Zarr/Storage/module-type-STORE/index.html">Zarr.Storage.STORE</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../../../../zarr/Zarr/Storage/module-type-STORE/Deferred/index.html#type-t">Deferred.t</a></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></span></code></summary><div class="odoc-spec"><div class="spec module anchored" id="module-Deferred"><a href="#module-Deferred" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Deferred/index.html">Deferred</a></span><span> : <a href="../../../../zarr/Zarr/Types/module-type-Deferred/index.html">Zarr.Types.Deferred</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../../../../zarr/Zarr/Types/module-type-Deferred/index.html#type-t">t</a></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The storage type.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Group"><a href="#module-Group" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Group/index.html">Group</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Array"><a href="#module-Array" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Array/index.html">Array</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hierarchy"><a href="#val-hierarchy" class="anchor"></a><code><span><span class="keyword">val</span> hierarchy : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../../../zarr/Zarr/Node/Array/index.html#type-t">Zarr.Node.Array.t</a> list</span> * <span><a href="../../../../zarr/Zarr/Node/Group/index.html#type-t">Zarr.Node.Group.t</a> list</span>)</span> <a href="Deferred/index.html#type-t">Deferred.t</a></span></span></code></div><div class="spec-doc"><p><code>hierarchy t</code> returns <code>p</code> where <code>p</code> is a pair of lists representing all nodes in store <code>t</code>. The first element of the pair is a list of all array nodes, and the second element is a list of all group nodes. This operation returns a pair of empty lists if store <code>t</code> is empty.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Parse_error</code> <p>if any node has invalid <code>node_type</code> metadata.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span><span class="keyword">val</span> clear : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Deferred/index.html#type-t">Deferred.t</a></span></span></code></div><div class="spec-doc"><p><code>clear t</code> clears the store <code>t</code> by deleting all nodes. If the store is already empty, this is a no-op.</p></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_open"><a href="#val-with_open" class="anchor"></a><code><span><span class="keyword">val</span> with_open : 
  <span><span class="optlabel">?level</span>:<span>[ `None <span>| `Fast</span> <span>| `Default</span> <span>| `Best</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?perm</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span>[&lt; `Read_only <span>| `Read_write</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Deferred/index.html#type-t">Deferred.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="Deferred/index.html#type-t">Deferred.t</a></span></span></code></div><div class="spec-doc"><p><code>with_open mode p f</code> opens the zip archive at path <code>p</code> and applies function <code>f</code> to its open handle and writes any changes back to the zip archive if <code>mode</code> is <code>`Read_write</code>, otherwise discards them at exit. If <code>p</code> does not exist, a handle to an empty zip archive is opened. Note that this function loads the entire zip archive into memory, so care must be taken to ensure that the compressed file contents can fit into memory. For now it does not handle ZIP64. ZIP64 is needed if your ZIP archive or decompressed file sizes exceed 2<sup>32</sup>-1 bytes or if you need more than 65535 archive members.</p><ul><li><code>level</code> is the DEFLATE algorithm compression level used when writing data to the store and defaults to <code>`Default</code>. Choose <code>`None</code> for no compression, <code>`Fast</code> for best speed, <code>`Best</code> for high compression rate and <code>`Default</code> for a mix of good speed and compression rate.</li><li><code>perm</code> is the file permission to use when opening an existing zip file and defaults to <code>0o700</code>.</li></ul></div></div></details></div></div></body></html>
