<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Zarr (zarr.Zarr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">zarr</a> &#x00BB; Zarr</nav><header class="odoc-preamble"><h1>Module <code><span>Zarr</span></code></h1><p><code>zarr</code> Provides an Ocaml implementation of the Zarr version 3 storage format specification. It supports creation of arrays and groups as well as chunking arrays along any dimension. One can store a Zarr hierarchy in memory or on disk. Zarr also supports reading zarr hierarchies created using other implementations, as long as they are spec-compliant.</p><p>Consult the <a href="#examples" title="examples">examples</a> and <a href="#limitations" title="limitations">limitations</a> for more info.</p></header><nav class="odoc-toc"><ul><li><a href="#references">References</a></li><li><a href="#node">Node</a></li><li><a href="#metadata">Metadata</a></li><li><a href="#storage">Storage</a></li><li><a href="#codecs">Codecs</a></li><li><a href="#indexing">Indexing</a></li><li><a href="#utils">Utils</a></li><li><a href="#ndarray">Ndarray</a></li><li><a href="#examples">Examples</a><ul><li><a href="#create_array">Create, read &amp; write array.</a></li></ul></li><li><a href="#extensions">Extension Points</a></li><li><a href="#limitations">Limitations</a></li></ul></nav><div class="odoc-content"><h4 id="references"><a href="#references" class="anchor"></a>References</h4><ul><li><a href="https://zarr-specs.readthedocs.io/en/latest/v3/core/v3.0.html">The Zarr Version 3 specification.</a></li><li><a href="https://zarr.dev/">Zarr community site.</a></li></ul><h2 id="node"><a href="#node" class="anchor"></a>Node</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Node"><a href="#module-Node" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Node/index.html">Node</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module provides functionality for manipulating Zarr nodes.</p></div></div><h2 id="metadata"><a href="#metadata" class="anchor"></a>Metadata</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Metadata"><a href="#module-Metadata" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Metadata/index.html">Metadata</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module provides functionality for manipulating a Zarr node's metadata JSON document.</p></div></div><h2 id="storage"><a href="#storage" class="anchor"></a>Storage</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Storage"><a href="#module-Storage" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Storage/index.html">Storage</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Memory"><a href="#module-Memory" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Memory/index.html">Memory</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Types"><a href="#module-Types" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Types/index.html">Types</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="codecs"><a href="#codecs" class="anchor"></a>Codecs</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Codecs"><a href="#module-Codecs" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Codecs/index.html">Codecs</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An array has an associated list of codecs. Each codec specifies a bidirectional transform (an encode transform and a decode transform). This module contains building blocks for creating and working with a chain of codecs.</p></div></div><h2 id="indexing"><a href="#indexing" class="anchor"></a>Indexing</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Indexing"><a href="#module-Indexing" class="anchor"></a><code><span><span class="keyword">module</span> Indexing</span><span> = <a href="Ndarray/Indexing/index.html">Ndarray.Indexing</a></span></code></div></div><h2 id="utils"><a href="#utils" class="anchor"></a>Utils</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Util"><a href="#module-Util" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Util/index.html">Util</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="ndarray"><a href="#ndarray" class="anchor"></a>Ndarray</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Ndarray"><a href="#module-Ndarray" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ndarray/index.html">Ndarray</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="examples"><a href="#examples" class="anchor"></a>Examples</h2><h3 id="create_array"><a href="#create_array" class="anchor"></a>Create, read &amp; write array.</h3><p>Here we show how the library's asynchronous API using Lwt's concurrency monad can be used.</p><pre class="language-ocaml"><code>open Zarr.Metadata
open Zarr.Node
open Zarr.Codecs
open Zarr_lwt.Storage
open FilesystemStore.Deferred.Syntax

let _ =
  Lwt_main.run begin
    let store = FilesystemStore.create &quot;testdata.zarr&quot; in
    let group_node = GroupNode.of_path &quot;/some/group&quot; in
    let* () = FilesystemStore.create_group store group_node in
    let array_node = ArrayNode.(group_node / &quot;name&quot;) in
    let* () = FilesystemStore.create_array
      ~codecs:[`Bytes BE] ~shape:[|100; 100; 50|] ~chunks:[|10; 15; 20|]
      Bigarray.Float32 Float.neg_infinity array_node store in
    let slice = Owl_types.[|R [0; 20]; I 10; R []|] in
    let* x = FilesystemStore.read_array store array_node slice Bigarray.Float32 in
    let x' = Owl.Dense.Ndarray.Generic.map (fun _ -&gt; Owl_stats_dist.uniform_rvs 0. 10.) x
    in FilesystemStore.write_array store array_node slice x'
  end</code></pre><h2 id="extensions"><a href="#extensions" class="anchor"></a>Extension Points</h2><p>This library also provides custom extensions not defined in the version 3 specification. These are tabulated below:</p><table class="odoc-table"><tr><th><p>Extension Point</p></th><th><p>Details</p></th></tr><tr><td><p>Data Types</p></td><td><p><code>char</code>, <code>complex32</code>, <code>int</code> (63-bit integer), <code>nativeint</code></p></td></tr></table><h2 id="limitations"><a href="#limitations" class="anchor"></a>Limitations</h2><p>Although this implementation tries to be spec compliant, it does come with a few limitations:</p><ul><li>Ocaml does not have support for unsigned integers as array data types and thus this library cannot support reading values of datatypes <code>uint32</code>, <code>uint64</code> and <code>complex128</code>.</li></ul></div></body></html>
